---
title: "Как отправлять заявку с сайта в Телеграм?"
date: "2017-10-18"
descr: "Доброго времени суток, друзья! Сегодня у нас второй выпуск лайфхаков для верстальщика. И, если Вы видели предыдущий - знаете, что сегодня за тема:) Поехали!"
description: "Рассказываю, как легко сделать отправку данных с сайта в телеграм"
cover: "img/cover.jpg"
cat: Полезное
video: "https://www.youtube.com/embed/H1YoM6Pmxek"
sources: "https://github.com/maxdenaro/maxgraph-youtube-source/tree/master/%D0%9E%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B0%20%D1%84%D0%BE%D1%80%D0%BC%D1%8B%20%D0%B2%20%D1%82%D0%B5%D0%BB%D0%B5%D0%B3%D1%80%D0%B0%D0%BC"
---

## Как отправлять заявку с сайта в Telegram?

Все мы знаем, что очень часто на самые разнообразные сайты нужна форма обратной связи. Там человек может оставить свои контактные данные, чтобы люди, представляющие сайт, смогли с ним связаться. И да, отправка эта часто производится на обычную почту (e-mail). Однако сейчас, благодаря открытому и несложному API Telegram можно спокойно настраивать отправку этих же сообщений в него. Зачем? Это быстрее и гораздо удобнее. Сразу, в специальном чате, у вас появится заявка от пользователя.

1. Для начала в поиске контактов Telegram вводим __@BotFather__. Это "отец" ботов, позволяющий прозводить с ними некоторые манипуляции. В том числе и создать бота (все скриншоты показаны на примере Telegram for Windows)
![Находим BotFather в Telegram](img/bot.jpg)
2. Нажимаем кнопку __Start__ в чате с BotFather, после чего нашему вниманию выпадет список доступных команд. Можем найти сами нужную команду и кликнуть, а можем написать прямо в чат: __"/newbot"__, без кавычек естественно
3. Далее нас попросят ввести имя бота. Будьте внимательны и избирательны, ведь Telegram работает по всему миру и огромное количество имен уже заняты ![Создаем бота и придумываем ему имя](img/name-bot.jpg)
4. После успешного ввода имени потребуется ввести username бота, по которому его можно будет найти в поиске ![Вводим username бота](img/id-bot.jpg)
5. Когда подберете верное имя для бота, вам придет последнее нужное сообщение от BotFather, содержащее в себе так называемый "токен". Данный токен пригодится Вам для дальнейших действий (токен можно увидеть на изображении выше)
6. Далее нужно создать групповой чат __(New Group)__. Называем этот чат как нам хочется, и добавляем туда уже созданного бота через поиск
7. Следующий шаг - присоединить бота к чату. Делается это командой __"/join @maxgrbot\_bot"__ в вашем созданном чате.
8. Затем, кликнув по __"maxgrbot\_bot"__ (т.е. названию вашего бота, оно то у вас другое будет), переходите в личный чат с ним и нажимаете кнопку __Start__. На этом работа с Telegram временно закончена

## Работа с формой

Теперь нужно создать форму и правильно ее разметить для работы с отправкой по Php.
Ниже приведен пример типичной формы на HTML:

``` html
<form action="telegram.php" method="POST">
  <legend>Заголовок формы</legend>

  <div class="form-group">
    <input type="text" class="form-control" id="" name="name" placeholder="Введите имя">
  </div>

  <div class="form-group">
    <input type="text" class="form-control" id="" name="phone" placeholder="Введите телефон">
  </div>

  <div class="form-group">
    <input type="text" class="form-control" id="" name="email" placeholder="Введите email">
  </div>

  <div class="form-group">
    <textarea name="msg" placeholder="введите сообщение"></textarea>
  </div>

  <button type="submit" class="btn">Отправить форму</button>
</form>
```
Важные нюансы:
* В form action должно быть обязательно написано __telegram.php__
* Сама кнопка должна быть типа `submit`
* Так же у формы должен быть `method="POST"`
* У каждого инпута должен быть прописан атрибут `name`

## PHP-скрипт

Далее нужно написать несложный php-скрипт для работы нашей отправки:

``` php
<?php

$name = $_POST['name'];
$phone = $_POST['phone'];
$email = $_POST['email'];
$msg = $_POST['msg'];
$token = "1007513873:AAHRuGZ8Cr1wULSsMevQi6S1KtbdwbSyfiU";
$chat_id = "-399030555";
$arr = array(
  'Имя пользователя: ' => $name,
  'Телефон: ' => $phone,
  'Email' => $email,
  'Сообщение:' => $msg
);

foreach($arr as $key => $value) {
  $txt .= "<b>".$key."</b> ".$value."%0A";
};

$sendToTelegram = fopen("https://api.telegram.org/bot{$token}/sendMessage?chat_id={$chat_id}&parse_mode=html&text={$txt}","r");

if ($sendToTelegram && $sendToTelegram2) {
  header('Location: thanks.html');
} else {
  echo "Error";
}
?>
```
Важные нюансы:
* В переменные `$name`, `$phone` и т.д. нужно вписать значения атрибута `name` из html
* В переменную `$token` запишите созданный вами ранее токен у __BotFather__

## Что делать с chat_id

Из всего того, что нам нужно заполнить, остается одно поле - `$chat_id`. Нужно откуда-то узнать его, чтобы заполнить.
Тут нам поможет добавление специального бота в нашу группу - __@RawDataBot__. Он позволит нам прямо в чате легко получить нужные данные, в том числе и __chat_id__.

## Заключение

И далее остается лишь отправить нашу форму. Надеюсь, смог вам помочь, а если текстового описания вам недостаточно - в начале статьи есть видео с моего ютуб-канала.

Удачи!
